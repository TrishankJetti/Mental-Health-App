@model IEnumerable<MentalHealthApp.Models.MoodEntry>

<link href="~/css/site.css" rel="stylesheet" />

@if (!Model.Any())
{
    <div class="alert alert-info text-center mt-4" style="background-color:#e5d4f7; color:#6b44b3;">
        You haven’t written any Entries yet.<br />
        <a asp-controller="MoodEntries" asp-action="Create" class="btn btn-purple">
            ➕ WRITE Your First!
        </a>
    </div>
}
else
{
    @if (ViewData["ShowCheckInReminder"] as bool? == true)
    {
        <div class="alert text-center" style="background-color:#f3e5ff; color:#6b44b3;">
            You haven't checked in recently!
        </div>
    }

    <h1 class="text-center tracking-in-expand" style="color:#6b44b3;">
        Your Mood Entries
    </h1>

    <div class="container mt-4">
        <a asp-controller="MoodEntries" asp-action="Create"
           class="btn btn-create"
           title="Click to Create!"
           style="border-radius: 100%; font-size: 90px; width: 120px; height: 120px; display: flex; justify-content: center; align-items: center; text-decoration: none; background-color:#6b44b3; color:white;">
            +
        </a>
    </div>


    <div class="d-flex justify-content-center gap-3 mt-3">
        <a asp-controller="MoodEntries" asp-action="MoodChart" class="btn btn-purple">
            <b>Your Mood Chart</b>
        </a>

        <a asp-controller="MoodEntries" asp-action="Stats" class="btn btn-purple">
            <b>Your Stats</b>
        </a>
    </div>


    @if (TempData["SuccessToast"] != null)
    {
        <div class="toast-container position-fixed bottom-0 end-0 p-3">
            <div class="toast show text-white shadow" style="background-color:#6b44b3;" role="alert">
                <div class="d-flex">
                    <div class="toast-body">
                        @TempData["SuccessToast"]
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            </div>
        </div>
    }

    <table class="table purple-table mt-4">
        <thead>
            <tr>
                <th>@Html.DisplayNameFor(m => m.First().Mood)</th>
                <th>@Html.DisplayNameFor(m => m.First().Date)</th>
                <th>@Html.DisplayNameFor(m => m.First().Notes)</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Mood</td>
                    <td>@Html.DisplayFor(modelItem => item.Date)</td>
                    <td>@Html.DisplayFor(modelItem => item.Notes)</td>
                    <td>
                        <a asp-action="Edit" asp-route-id="@item.Id" class="action-icon me-2">
                            <i class="bi bi-pen-fill"></i>
                        </a>
                        <a asp-action="Delete" asp-route-id="@item.Id" class="action-icon">
                            <i class="bi bi-x-circle-fill"></i>
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

<style>
    .tracking-in-expand {
        -webkit-animation: tracking-in-expand 0.7s cubic-bezier(0.215,0.610,0.355,1.000) both;
        animation: tracking-in-expand 0.7s 2s cubic-bezier(0.215,0.610,0.355,1.000) both;
        color:#6b44b3;
    }

    @@-webkit-keyframes tracking-in-expand {
        0% { letter-spacing: -0.5em; opacity: 0; }
        40% { opacity: 0.6; }
        100% { opacity: 1; }
    }

    @@keyframes tracking-in-expand {
        0% { letter-spacing: -0.5em; opacity: 0; }
        40% { opacity: 0.6; }
        100% { opacity: 1; }
    }

    table tbody tr:hover {
        background-color: #f3e5ff;
    }


</style>
