@{
    ViewData["Title"] = "Mood Chart";
}

<h2 style="text-align:center; color:#6b44b3;">Your Mood Overview</h2>
<link href="~/css/site.css" rel="stylesheet" />

<!-- Mood Chart How it works? Button trigger modal -->
<div class=" d-flex justify-content-center">
<button type="button" class="btn btn-purple" data-bs-toggle="modal" data-bs-target="#exampleModal">
    How do I use this?
</button>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">How to use</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                The mood chart is a visual representation of all your moods gathered from your Mood Entries.
                You may hover over each piece in the chart and additionally look at the legend to view all your moods.
                Have fun :)
            </div>


        </div>
    </div>
</div>

<div class="chart-container">
    <canvas id="moodChart"></canvas>
</div>

<!--Back button sith javascript function for previous page.-->
<div class="text-center mt-3">
    <a href="javascript:history.back()" class="btn btn-purple">Go Back</a>
</div>



<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!--THis is the script tag for the chart js, javascript files.-->


<script>


    // Chart.js code
    const ctx = document.getElementById('moodChart');

    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.MoodLabels)),
            datasets: [{
                data: @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.MoodData)),
                backgroundColor: ['#ff6384', '#36a2eb', '#ffcd56', '#4bc0c0', '#9966ff', '#ff9f40'],
                borderColor: '#fff',
                borderWidth: 2
            }]
        },
        options: {
            cutout: '70%',
            plugins: {
                legend: {
                    position: 'top',
                    labels: { color: 'black' }
                }
            }
        }
    });
</script>


                <style>
    .chart-container {
        width: 60%; /* Chart takes up 60% of screen width */
        max-width: 600px; /* But don’t let it get too huge */
        margin: 0 auto; /* Center it */
    }

    #moodChart {
        width: 100% !important;
        height: auto !important;
    }

                </style>