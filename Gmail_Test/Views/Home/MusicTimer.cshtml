@{
    ViewData["Title"] = "1-Minute Music";
}

<div class="container text-center mt-5">
    <h2>1-Minute Music Timer</h2>

    <div class="mt-4">
        <div id="timer" class="h1">1:00</div>
    </div>

    <div class="mt-4">
        <button id="startBtn">Start</button>
        <button id="pauseBtn">Pause</button>
        <button id="resetBtn">Reset</button>
    </div>

    <audio id="music" loop>
        <source src="~/img/RNB.mp3" type="audio/mpeg">
        Your browser does not support audio.
    </audio>
</div>

@section Scripts {
    <script>
        // Get elements by their ID 
        var timerDisplay = document.getElementById("timer");
        var startBtn = document.getElementById("startBtn");
        var pauseBtn = document.getElementById("pauseBtn");
        var resetBtn = document.getElementById("resetBtn");
        var music = document.getElementById("music");

        var timeLeft = 60; // Intialize timing
        var interval; // Interv

        function updateTimer() {
            var minutes = Math.floor(timeLeft / 60);
            var seconds = timeLeft % 60;
            timerDisplay.textContent = minutes + ":" + (seconds < 10 ? "0" + seconds : seconds);
        }

        // Start button
        startBtn.onclick = function () {
            music.play();
            clearInterval(interval); // Prevent multiple intervals
            interval = setInterval(function () {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 0) {
                    clearInterval(interval);
                }
            }, 1000);
        }

        // Pause button
        pauseBtn.onclick = function () {
            clearInterval(interval);
            music.pause();
        }

        // Reset button
        resetBtn.onclick = function () {
            clearInterval(interval);
            timeLeft = 60;
            updateTimer();
            music.pause();
            music.currentTime = 0;
        }

        // Initialize display
        updateTimer();
    </script>
}
