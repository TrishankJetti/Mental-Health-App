@using Microsoft.AspNetCore.Identity
@using MentalHealthApp.Models

@inject SignInManager<CustomUser > SignInManager
@inject UserManager<CustomUser > UserManager

@{
    ViewData["Title"] = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var currentUser = await UserManager.GetUserAsync(User);
    var firstName = currentUser?.FirstName ?? "Friend";
}

<div class="container py-5" style="max-width: 900px;">
    <header class="text-center mb-5">
        <h1 class="display-4 fw-bold text-primary" style="color:#5a4d7a;">
            Welcome to Shanti,<br />
            <span class="text-secondary">@firstName!</span>
        </h1>
        <p class="lead text-muted mt-3">Your safe space for mental wellbeing and growth.</p>
    </header>

    <section class="mb-5">
        <h2 class="text-center mb-4 fw-semibold" style="color:#5a4d7a;">Explore Our Tools</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body d-flex flex-column align-items-center text-center p-4">
                        <img src="~/img/Group 1.png" alt="Mindfulness" class="mb-3" style="width: 70px; height: 70px; object-fit: contain;" />
                        <h5 class="card-title fw-bold" style="color:#5a4d7a;">Mindfulness Exercises</h5>
                        <p class="card-text text-muted flex-grow-1">Learn techniques to stay present and reduce stress with guided mindfulness activities.</p>
                        <a href="@Url.Action("BreatheExercise", "Home")" class="btn btn-primary rounded-pill px-4 mt-3 shadow-sm" style="background-color:#6b44b3; border:none;">
                            Explore
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body d-flex flex-column align-items-center text-center p-4">
                        <img src="~/img/Group 2.png" alt="Journal" class="mb-3" style="width: 70px; height: 70px; object-fit: contain;" />
                        <h5 class="card-title fw-bold" style="color:#5a4d7a;">Daily Journal</h5>
                        <p class="card-text text-muted flex-grow-1">Track your moods and thoughts to understand your mental health patterns better.</p>
                        <a href="@Url.Action("Index", "MoodEntries")" class="btn btn-primary rounded-pill px-4 mt-3 shadow-sm" style="background-color:#6b44b3; border:none;">
                            Start Journaling
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 rounded-4">
                    <div class="card-body d-flex flex-column align-items-center text-center p-4">
                        <img src="~/img/Group 3.png" alt="Support" class="mb-3" style="width: 70px; height: 70px; object-fit: contain;" />
                        <h5 class="card-title fw-bold" style="color:#5a4d7a;">How does Shanti Work?</h5>
                        <p class="card-text text-muted flex-grow-1"> Click here to be enlightened. </p>
                        <a href="@Url.Action("HowToUse", "Home")" class="btn btn-primary rounded-pill px-4 mt-3 shadow-sm" style="background-color:#6b44b3; border:none;">
                            Get Support
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="text-center mt-5">
        <blockquote class="blockquote fs-5 fst-italic text-secondary" style="max-width: 600px; margin: 0 auto;">
            "Your Greatest Battle is the One with Yourself."
        </blockquote>
        <cite class="blockquote-footer text-muted">Shanti Team</cite>
    </footer>
</div>

<style>
    /* Optional: subtle background gradient for calmness */
    body {
        background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
</style>