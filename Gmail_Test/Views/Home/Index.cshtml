@using Microsoft.AspNetCore.Identity
@using MentalHealthApp.Models

@inject SignInManager<CustomUser> SignInManager
@inject UserManager<CustomUser> UserManager

@{
    ViewData["Title"] = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var currentUser = await UserManager.GetUserAsync(User); //Grabs current user from usermanager
    var firstName = currentUser?.FirstName ?? "Friend"; // Gets Firstname from current user, but if they arent signed in then the default firstname is Friend for this view.
}

<div class="container-fluid p-0">
    <!-- Banner with Monster popping out of it. -->
    <div class="position-relative bg-primary text-white rounded-3 mb-4" style="background: linear-gradient(135deg, #667eea, #764ba2) !important;"> <!--- This is the Banner code that has a linear gradient that has white text in it. --->
        <div class="p-5 text-center">
            <h1 class="display-4 fw-bold">Hello, @firstName! 🌸</h1> <!---Display name and greeting!--->
            <p class="lead">Take a deep breath. Today is a new beginning.</p>
        </div>
        <div class="monster-peek">
            <img src="~/img/HomePageMonster (1).png" alt="Friendly Monster" class="monster-img" />
        </div>

     
    </div>

<!-- Quick Actions -->
<div class="quick-actions">
    <a href="@Url.Action("Create", "MoodEntries")" class="quick-btn">
        📊 Log Mood
    </a>
    <a href="@Url.Action("Index", "Shop")" class="quick-btn">
        🛍️ Shop
    </a>
</div>

<!-- Activities -->
<div class="activities">
    <h2>Your Peaceful Space</h2>

    <div class="activity-grid">
        <a href="@Url.Action("BreatheExercise", "Home")" class="activity-card">
            <div class="emoji">🌬️</div>
            <h3>Breathing</h3>
            <p>Find your calm</p>
        </a>

        <a href="@Url.Action("Index", "MoodEntries")" class="activity-card">
            <div class="emoji">📖</div>
            <h3>Mood Journal</h3>
            <p>Track feelings</p>
        </a>

        <a href="@Url.Action("Find", "Friends")" class="activity-card">
            <div class="emoji">💫</div>
            <h3>Connect</h3>
            <p>Find friends</p>
        </a>

        <a href="@Url.Action("AllEvents", "Planner")" class="activity-card">
            <div class="emoji">🗓️</div>
            <h3>Planner</h3>
            <p>Plan your adventure!</p>
        </a>

        <a href="@Url.Action("Stressball", "Home")" class="activity-card">
            <div class="emoji">🎯</div>
            <h3>Stress Relief</h3>
            <p>Relax & unwind</p>
        </a>

        <a href="@Url.Action("ColorTherapy", "Home")" class="activity-card"> <!---Takes the user to the Home controller's ColorTheraphy action hence showing the view of the ColorTheraphy page.' -->
            <div class="emoji">🌈</div>
            <h3>Color Therapy</h3>
            <p>Calm colors</p>
        </a>
    </div>
</div>

<style>
        .top-section { /* class for topsection that has the background pruple and the text colour white . */
            background: purple;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 60px; /* extra space so monster has room */
            position: relative;
            /* removed overflow:hidden so monster can stick out */
        }

        /* Monster Image  styling to give it a 3d peeking look for immersiveness.*/
        .monster-peek {
            position: absolute;
            bottom: -156px; /* pushes the mosnter out of the banner for a 3d effect. */
            right: 20px;
            width: 300px;
        }

        .monster-img {
            width: 100%;
            height: auto; /* the height of the mosnter is set to the defualt height of the iamge.*/
        }



        

    /* Quick Actions */
    .quick-actions {  /* Creates a flexible layout for the quick action items to dispklay. */
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-bottom: 3rem;
    }

    .quick-btn { /* The actual button's styling */
        background: white;
        padding: 1rem 2rem;
        border-radius: 50px;
        text-decoration: none;
        color: #667eea;
        font-weight: bold;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }

        .quick-btn:hover { /* Then this is the hover aniamtion code. where the button slighly get a lighter shodow to give an illusion of a 3d lift.*/
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            text-decoration: none;
            color: #764ba2;
        }

    /* Activities styling similar to the quick actions.*/
    .activities {
        max-width: 1000px;
        margin: 0 auto 3rem;
    }

        .activities h2 {
            text-align: center;
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 2rem;
        }

    .activity-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
    }

    .activity-card {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        text-align: center;
        text-decoration: none;
        color: inherit;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            text-decoration: none;
        }

        .emoji { /*Styling for emojsi that show up in the name of activity boxes.*/
            font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .activity-card h3 {
        color: #2d3748;
        margin-bottom: 0.5rem;
    }

    .activity-card p {
        color: #718096;
        margin: 0;
    }

    
        @@media (max-width: 1000px) { /* When the website is viewed on smaller screens that are smaller than or are 1000 px, the iamge wouldnt show. */
            .monster-peek,
            .monster-img {
                display: none !important;
            }
        }

</style>